<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:pe="http://primefaces.org/ui/extensions" >
    
    <p:dialog id="dlgConsorcio" widgetVar="wvDlgConsorcio" width="52%" height="60%"
              modal="true" resizable="false" appendTo="@(body)"
              header="BÃºsqueda de empresas consorcio" closable="false">
        <h:form id="frmConsorcio" >
            <h:panelGrid columns="4" id="pnlCabecera" >
                <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_tiposCliente}(*)" style="width: 110px;display: block;font-weight: bold;" />
                <p:selectOneMenu id="tipoDoc" value="#{sspCarteraClienteController.tipoDocConsorcio}" >
                    <f:selectItems var="item" itemValue="#{item.id}" itemLabel="#{item.nombre}" value="#{sspCarteraClienteController.lstTipoDocConsorcio}"/>
                    <p:ajax event="change" process="@form" update="@form" listener="#{sspCarteraClienteController.cambiarTipoDocConsorcio() }" />
                </p:selectOneMenu>
                <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_ruc}(*)" style="margin-left: 20px;font-weight: bold;"  />
                <h:panelGrid columns="2" >
                    <p:inputText value="#{sspCarteraClienteController.numDocConsorcio}" id="ruc" maxlength="11"  >
                        <p:keyFilter mask="int" preventPaste="false" />
                    </p:inputText>
                    <p:commandButton value="Buscar" 
                                     actionListener="#{sspCarteraClienteController.buscarDatosClienteConsorcio()}"
                                     process="@form"
                                     update="@form"
                                     icon="ui-icon-search" />
                </h:panelGrid>
                
                <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_rznSocial}(*)" rendered="#{sspCarteraClienteController.blnBuscoConsorcio}" style="font-weight: bold;" />
                <p:inputText value="#{sspCarteraClienteController.consorcio.rznSocial}" id="rznSocial" rendered="#{sspCarteraClienteController.blnBuscoConsorcio }" style="width: 300px;" maxlength="300" disabled="#{sspCarteraClienteController.disabledBuscoConsorcio}" />
                <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_nombreComercial}" style="font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoConsorcio}" />
                <p:inputText value="#{sspCarteraClienteController.consorcio.nomCom}" id="nomCom" maxlength="200" rendered="#{sspCarteraClienteController.blnBuscoConsorcio}" disabled="#{!sspCarteraClienteController.esNuevoConsorcio}" />
                
                <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_direccion}(*)" style="font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoConsorcio}" />
                <p:inputText value="#{sspCarteraClienteController.direccionRucConsorcio}" style="width: 300px;" id="direccionRuc" maxlength="300" rendered="#{sspCarteraClienteController.blnBuscoConsorcio}" disabled="#{sspCarteraClienteController.disabledBuscoConsorcio}" />
                <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_ubigeo}(*)" style="font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoConsorcio }" />
                <p:selectOneMenu id="ubigeoRuc" value="#{sspCarteraClienteController.ubigeoRucConsorcio }" filter="true" rendered="#{sspCarteraClienteController.blnBuscoConsorcio}"
                                 disabled="#{sspCarteraClienteController.disabledBuscoConsorcio}"
                                 effect="fade" filterMatchMode="contains" panelStyle="width:500px"
                                 style="width: 400px" >
                    <f:selectItem itemLabel="--------" itemValue="#{null}"/>
                    <f:selectItems value="#{sspCarteraClienteController.listDistritos}"
                                   var="distrito" itemLabel="#{distrito.nombreCompleto}"
                                   itemValue="#{distrito}"/>
                </p:selectOneMenu>
            </h:panelGrid>
            
            <br/>
            <div align="right">
                <p:commandButton value="Cancelar"
                                 process="@this"
                                 style="float: right"
                                 update="@form"
                                 oncomplete="PF('wvDlgConsorcio').hide()" />
                
                <p:commandButton value="Agregar"
                                     process="@form"
                                     actionListener="#{sspCarteraClienteController.agregarConsorcio() }"
                                     style="float: right"
                                     update="@form" />
            </div>
        </h:form>
    </p:dialog>
</html>