<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:p="http://primefaces.org/ui" >
    
    <h:form id="createSolicitudForm" rendered="#{amaSolicitudTarjetaController.estado == 'CREAR'}" >
            <p:panel id = "pnlDatosAnteriores" header="#{BundleBDIntegrado.amaSolicitudTarjeta_datosAnteriores_title}"  >
                <h:panelGrid columns="6"  >
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_licencia}"  />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.registroSelected.NRO_LIC}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_serie}" style="margin-left: 20px;"/>
                    <p:outputLabel value="#{amaSolicitudTarjetaController.registroSelected.NRO_SERIE}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_tipoArma}" style="margin-left: 20px;" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.registroSelected.DES_ARM}" style="font-weight: bold;" />
                    
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_marca}" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.registroSelected.DES_MARCA}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_modelo}" style="margin-left: 20px;" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.registroSelected.DES_MODELO}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_calibre}" style="margin-left: 20px;" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.obtenerCalibreSolicitud(amaSolicitudTarjetaController.registroSelected)}" style="font-weight: bold;" />
                    
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_Estado}" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.obtenerSituacionSolicitud(amaSolicitudTarjetaController.registroSelected)}" style="font-weight: bold;" />
                    <p:outputLabel value="" />
                    <p:outputLabel value="" />
                    <p:outputLabel value="" />
                    <p:outputLabel value="" />
                </h:panelGrid>
            </p:panel>
            <br/>
            
            <p:panel id = "pnlDatosInternamiento" header="#{BundleBDIntegrado.amaSolicitudTarjeta_datosInternamiento_title}"  >        
                <h:panelGrid columns="6" >
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_codigActa}" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.datosActaInt.NRO_ACTA}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_fechaActa}" style="margin-left: 10px;" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.datosActaInt.FECHA_ACTA}" style="font-weight: bold;" />
                    <p:outputLabel value="" />
                    <p:outputLabel value="" />
                    
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_tipoInternamiento}" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.datosActaInt.TIPO_INTERNAMIENTO}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_tipoDeposito}" style="margin-left: 10px;" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.datosActaInt.TIPO_DEPOSITO}" style="font-weight: bold;" />
                    <p:outputLabel value="" />
                    <p:outputLabel value="" />
                    
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_serie}" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.datosActaInt.NRO_SERIE}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_tipoArma}" style="margin-left: 10px;" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.datosActaInt.TIPO_ARMA}" style="font-weight: bold;" />
                    <p:outputLabel value="" />
                    <p:outputLabel value="" />
                    
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_marca}" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.datosActaInt.MARCA}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_modelo}" style="margin-left: 10px;" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.datosActaInt.MODELO}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_calibre}" style="margin-left: 10px;" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.datosActaInt.CALIBRE}" style="font-weight: bold;" />
                </h:panelGrid>
                <h:panelGrid columns="2" >
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_almacen}" style="width: 110px; display:block;" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.obtenerAlmacenActaInternamiento()}" style="font-weight: bold;" />
                </h:panelGrid>
            </p:panel>
            
            <p:panel id = "pnlDatosTramite" header="#{BundleBDIntegrado.amaSolicitudTarjeta_datosTramite_title}"  >
                <h:panelGrid columns="2" >
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_tipoTramite}" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.parametrizacionTupa.procesoIntegradoId.nombre}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_administrado}" />
                    <p:outputLabel value="#{amaSolicitudTarjetaController.registro.personaId.rznSocial}" style="font-weight: bold;" />
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_representanteLegal}" />
                    <p:selectOneMenu id="representante"
                                     style="font-weight: bold;"
                                     value="#{amaSolicitudTarjetaController.representanteLegal}" >
                        <f:selectItem itemLabel="---" itemValue="#{null}"/>
                        <f:selectItems value="#{amaSolicitudTarjetaController.obtenerListadoRepresentantes()}"
                                       var="persona" itemLabel="#{persona.personaDestId.nombreCompleto} / #{persona.personaDestId.numDoc}"
                                       itemValue="#{persona.personaDestId}"/>
                    </p:selectOneMenu>
                    <p:outputLabel value="#{BundleBDIntegrado.amaSolicitudTarjeta_comprobante}" />
                    <p:column id="clmComprobante">
                        <p:autoComplete id="reciboBn"
                                        value="#{amaSolicitudTarjetaController.recibo}"
                                        completeMethod="#{amaSolicitudTarjetaController.autoCompleteRecibos}"
                                        disabled="#{amaSolicitudTarjetaController.disableReciboBn}"
                                        placeholder="NRO. COMPROBANTE"
                                        required="true"
                                        requiredMessage="Debe ingresar el número del comprobante"
                                        var="item"
                                        itemLabel="#{item.nroSecuencia}"
                                        itemValue="#{item}"
                                        minQueryLength="3"
                                        cache="false"
                                        style="font-weight: bold;"
                                        forceSelection="true" >
                            <p:ajax event="itemSelect" listener="#{amaSolicitudTarjetaController.lstnrSelectRecibo}" process="@this, pnlDatosTramite" update="@this, pnlDatosTramite" />
                        </p:autoComplete>
                        <p:commandButton value="x" id="btnDelRecibo"
                                         styleClass="botonBorrar"
                                         title="Borrar Recibo seleccionado"
                                         rendered="#{amaSolicitudTarjetaController.recibo != null}"
                                         process="@this, pnlDatosTramite"
                                         partialSubmit="true"
                                         actionListener="#{amaSolicitudTarjetaController.borrarReciboSeleccionado}"
                                         update="@this, pnlDatosTramite" />
                        <pe:tooltip for="reciboBn"
                                    rendered="#{amaSolicitudTarjetaController.recibo == null}"
                                    value="Ingrese el número del recibo del Banco de la Nación"
                                    showEffect="slideToggle"
                                    hideEffect="slideToggle"
                                    showDelay="0"
                                    myPosition="left center"
                                    atPosition="right center"/>
                        <p:outputLabel value="#{amaSolicitudTarjetaController.obtenerDatosRecibo()}" rendered="#{amaSolicitudTarjetaController.recibo != null}" />
                    </p:column>
                </h:panelGrid>
            </p:panel>
            <br/><br/>
 
             <div align="center">
                 <p:commandButton id="botonRegresar"
                                 icon="ui-icon-arrowthick-1-w"
                                 update="@all"
                                 process="@all"
                                 immediate="true"
                                 action="#{amaSolicitudTarjetaController.direccionarBandeja()}" 
                                 value="#{BundleBDIntegrado.Regresar}" />
                <p:commandButton id="botonGuardar"
                                 icon="ui-icon-disk"
                                 update="@all"
                                 process="@all"
                                 style="margin-left: 30px;"
                                 action="#{amaSolicitudTarjetaController.crearSolicitud()}" 
                                 value="#{BundleBDIntegrado.Guardar}" />
                <p:outputLabel value="  "/>
            </div>
            <br/>
        </h:form>
</ui:composition>

                

        
        