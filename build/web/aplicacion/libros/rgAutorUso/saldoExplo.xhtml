<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    <h:form id="saldoForm" rendered="#{eppLibroController.estado == 'SALDOS'}" >
        <p:panel header="Saldo de Uso de Explosivos" >
            <h:panelGrid columns="3">
                <p:outputLabel value="Lugar Uso"/>
                <p:selectOneMenu id="resPL" value="#{eppLibroController.eppLibro}"
                                 >
                    <f:selectItem itemLabel="-----" itemValue="#{null}"/>
                    <f:selectItems value="#{eppLibroController.listResolucionUso}" 
                                   var="luso" itemValue="#{luso}"
                                   itemLabel="#{luso.registroId.eppResolucion.numero}"
                                   />
                </p:selectOneMenu>  
                <p:commandButton value="Mostrar Saldo" update="dtsal" icon="ui-icon-search"
                                 actionListener="#{eppLibroController.listadoSaldosUsoExplosivos()}"/>
            </h:panelGrid>
            <h:panelGroup style="float: right ; margin-top:-40px">
                <p:commandButton value="Regresar" update="@all" icon="ui-icon-arrowreturnthick-1-e"
                                 actionListener="#{eppLibroController.regresarNavegacionSaldo()}"/>
            </h:panelGroup>
        </p:panel>
        <p:panel>
            <p:dataTable id="dtsal" value="#{eppLibroController.listSaldoExplosivos}"
                         var="item" widgetVar="sal"                                  
                         rowKey="#{item}" style="margin-bottom:0"
                         emptyMessage="#{bundle.MensajeNoResultados}"
                         paginator="true" 
                         rows="#{bundle.PaginatorFilas}"  
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                         rowsPerPageTemplate="#{bundle.PaginatorFilasPorPagina}">             
                <p:column headerText="Explosivo">
                    <f:facet name="header">
                        <h:outputText value="Explosivo" />
                    </f:facet>
                    <h:outputText value="#{item.explosivo}"/>
                </p:column>
                <p:column headerText="Tipo Registro" 
                          >
                    <f:facet name="header">
                        <h:outputText value="Tipo Registro" />
                    </f:facet>
                    <h:outputText value="#{item.tipoRegistro}"/>
                </p:column>
                <p:column headerText="Saldo" 
                          >
                    <f:facet name="header">
                        <h:outputText value="Saldo" />
                    </f:facet>
                    <h:outputText value="#{item.saldo}"/>
                </p:column>
                <p:column headerText="Periodo" sortBy="#{item.periodo}">
                    <f:facet name="header">
                        <h:outputText value="Periodo" />
                    </f:facet>
                    <h:outputText value="#{item.periodo}"/>
                </p:column>
            </p:dataTable>    

        </p:panel>
    </h:form>
</ui:composition>

