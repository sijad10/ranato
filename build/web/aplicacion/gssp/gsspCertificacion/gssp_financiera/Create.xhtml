<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<ui:composition template="/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui" 
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
                    
<ui:define name="librerias">
    <!-- Aqu puedes incluir tus librerías específicas de la página --> 
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script type="text/javascript" src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="/sel/faces/javax.faces.resource/js/gssp/gsspSolicitudAutorizacion/proteccion_personal/create.js" type="text/javascript"></script>
    <link type="text/css" rel="stylesheet" href="/sel/faces/javax.faces.resource/js/gssp/gsspSolicitudAutorizacion/proteccion_personal/create.css"  />
</ui:define> 

<ui:define name="title"> 
    <div class="ui-fluid"> 
        <div class="ui-g-12 ui-md-12 ui-lg-12">
          <b><h:outputText value="Solicitud de Certificación de Requisitos Minímos de Seguridad" rendered="true"/></b>
        </div>
    </div>
</ui:define>    
    
    <ui:define name="body">
        <div class="ui-fluid">
            <h:panelGroup id="hgroup1" >
                <h:form id="FormRegSolicCertRMEF" class="form_name_main" rendered="true">
                <p:focus context="FormRegSolicCertRMEF" />
                
                <p:panel id="pnl_DatosAdministrado" header="Datos del Administrado" style="background-color: #f0f2f4;">
                    <div class="ui-g">    
                        <div class="ui-g-12 ui-md-3 ui-lg-1">
                            <p:outputLabel value="Razón Social: "/>
                        </div>
                        <div class="ui-g-12 ui-md-4 ui-lg-5">
                            <p:inputText id="txt_RazonSocial" style="border: 1px solid #404040; opacity: .60;" value="#{gsspSolicitudCertificacionRMEFController.administRazonSocial}" disabled="true"/>
                        </div>
                        <div class="ui-g-12 ui-md-2 ui-lg-1">
                            <p:outputLabel value="RUC: "/>
                        </div>
                        <div class="ui-g-12 ui-md-3 ui-lg-1">
                            <p:inputText id="txt_Ruc" style="border: 1px solid #404040; opacity: .60;" value="#{gsspSolicitudCertificacionRMEFController.administRUC}" disabled="true"/>
                        </div>
                    </div>
                </p:panel>
                <BR/>
                
                <p:panel id="pnl_DatosOficina" header="Oficina" style="background-color: #f0f2f4;">
                    <div class="card">
                        <p:fieldset id="fsDatosOficina" legend="Datos Oficina" style="background-color: #f0f2f4;">
                            
                            
                            <div class="ui-g">
                                <div class="ui-g-2">
                                    <p:outputLabel value="Ubigeo*: " />
                                </div> 
                                <div class="ui-g-2">
                                    <p:selectOneMenu id="bcoLPE_AmbitoOperaDIstrito" filter="true" filterMatchMode="contains" value="#{gsspSolicitudCertificacionRMEFController.distritoIdOficina}" class="combo_tipo_100">   
                                        <f:selectItem itemLabel="---" itemValue="#{null}"/>
                                        <f:selectItems var="itemAmbitoOperaDIstrito" itemValue="#{itemAmbitoOperaDIstrito}" itemLabel="#{itemAmbitoOperaDIstrito.provinciaId.departamentoId.nombre} / #{itemAmbitoOperaDIstrito.provinciaId.nombre} / #{itemAmbitoOperaDIstrito.nombre}" value="#{gsspSolicitudCertificacionRMEFController.regDistritoLPSList}"/>
                                        <p:ajax event="change" update="@this"  />
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-2">
                                    <p:outputLabel value="Agregar Oficina*: " />
                                </div> 
                                <div class="ui-g-2">
                                    <p:commandButton id="btnModalNuevoLocal"
                                             icon="ui-icon-map" 
                                             actionListener="#{gsspSolicitudCertificacionRMEFController.openDlgMapa()}"
                                             value="Nuevo" 
                                             process="@this"
                                             rendered="true"/>
                                    <p:tooltip for="btnModalNuevoLocal" value="Nuevo Local" showEffect="clip" hideEffect="fold" />
                                </div>
                                
                            </div>
                            
                            <div class="ui-g">
                                <div class="ui-g-2">
                                    <p:outputLabel value="Dirección*: " />
                                </div> 
                                <div class="ui-g-4">
                                    <p:inputText id="txtDireOfi" value="#{gsspSolicitudCertificacionRMEFController.direccionOficina}"  readonly="false" />
                                </div>
                                
                            </div>
                            <div class="ui-g">
                                <div class="ui-g-2">
                                    <p:outputLabel value="Referencia*: " />
                                </div> 
                                <div class="ui-g-4">
                                    <p:inputText id="txtRef" value="#{gsspSolicitudCertificacionRMEFController.referenciaOficina}"  readonly="false" />
                                </div>
                            </div>
                            
                            <div class="ui-g">
                                <div class="ui-g-2">
                                    <p:outputLabel value="Latitud*: " />
                                </div> 
                                <div class="ui-g-2">
                                    <p:inputText id="txtLatitud" value="#{gsspSolicitudCertificacionRMEFController.lat_x}" readonly="true" />
                                </div>
                                <div class="ui-g-2">
                                    <p:outputLabel value="Longitud*: " />
                                </div> 
                                <div class="ui-g-2">
                                    <p:inputText id="txtLongitud" value="#{gsspSolicitudCertificacionRMEFController.long_x}" readonly="true" />
                                </div>
                            </div>
                            <div class="ui-g">
                                <div class="ui-g-2">
                                    <p:outputLabel value="Código de Oficina*: " />
                                </div> 
                                <div class="ui-g-2">
                                    <p:inputText id="txtCodOfi" value="#{gsspSolicitudCertificacionRMEFController.codigoOficina}" maxlength="20" />
                                </div>
                                <div class="ui-g-2">
                                    <p:outputLabel value="Nombre Comercial*: " />
                                </div> 
                                <div class="ui-g-2">
                                    <p:inputText id="txtNomComOfi" value="#{gsspSolicitudCertificacionRMEFController.nombreOficina}" maxlength="20"  />
                                </div>
                                <div class="ui-g-2">
                                    <p:outputLabel value="Tipo de Oficina*: " />
                                </div>
                                 <div class="ui-g-2">
                                <p:selectOneMenu id="cboLPE_TipLocal"  value="#{gsspSolicitudCertificacionRMEFController.tipoLocalOficina}" >   
                                <f:selectItem itemLabel="---" itemValue="#{null}"/>
                                <f:selectItems var="itemTipLocal" itemValue="#{itemTipLocal}" itemLabel="#{itemTipLocal.nombre}" value="#{gsspSolicitudCertificacionRMEFController.regTipLocalLPSList}"/>
                                <p:ajax event="change" process="@this" update="@this" />
                                </p:selectOneMenu>
                                     </div>
                            </div>
                            
                        </p:fieldset>
                    </div>
                </p:panel>
                
                <BR/>
                
                <p:panel id="pnl_RepreLegal" header="Representante Legal" style="background-color: #f0f2f4;">
                    <div class="card">
                        <p:fieldset id="fsRepresentante" legend="Datos de Representante Legal" style="background-color: #f0f2f4;">
                            <div class="ui-g">
                                <div class="ui-g-2">
                                    <p:outputLabel value="Representante Legal*: " />
                                </div> 
                                <div class="ui-g-3">
                                   <p:selectOneMenu id="cboRepresLegal" value="#{gsspSolicitudCertificacionRMEFController.personaDetalleSelectedString}" class="combo_tipo_100">     
                                    <f:selectItem itemLabel="---" itemValue="#{null}"/>
                                    <f:selectItems var="itemRepresLegal" itemValue="#{itemRepresLegal.id}" itemLabel="#{itemRepresLegal.nombres}, #{itemRepresLegal.apePat} #{itemRepresLegal.apeMat}, DNI #{itemRepresLegal.numDoc}" value="#{gsspSolicitudCertificacionRMEFController.personaDetalleListado}"/>     
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-2">
                                    <p:commandButton id="btnRLBuscar"
                                        icon="ui-icon-plus"
                                        actionListener="#{gsspSolicitudCertificacionRMEFController.openDlgPersonaRepresentanteLegal()}"
                                        value="Agregar Representante Legal"
                                    />
                                </div>
                            </div>
                        </p:fieldset>
                    </div>
                </p:panel>
                
                <BR/>
                
                <p:panel id="pnl_JefeSeguridad" header="Jefe Seguridad" style="background-color: #f0f2f4;">
                    <div class="card">
                        <p:fieldset id="fsJefeSeguridad" legend="Datos Jefe de Seguridad" style="background-color: #f0f2f4;">
                            <div class="ui-g">
                                <div class="ui-g-2">
                                    <p:commandButton id="btnRLBuscarSocio"
                                            icon="ui-icon-search" 
                                            actionListener="#{gsspSolicitudCertificacionRMEFController.openDlgJefeSeguridad()}"
                                            value="Buscar"
                                       />
                                </div> 
                                <div class="ui-g-2">
                                    <p:outputLabel value="Persona: " />
                                </div>
                                <div class="ui-g-3">
                                    <p:outputLabel value="#{gsspSolicitudCertificacionRMEFController.regNombreJefeEncontrado}" rendered="#{gsspSolicitudCertificacionRMEFController.regNombreJefeEncontrado != null}" style="font-weight: bold;color: #22c822;"/>
                                </div>
                            </div>
                            <div class="ui-g">
                                <div class="ui-g-2">
                                     <p:outputLabel value="Prioridad: " />
                                </div>
                                <div class="ui-g-2">
                                    <p:selectOneMenu id="cboLPE_Alm_Prioridad"  value="#{gsspSolicitudCertificacionRMEFController.regPrioridadLPSSelected }" class="combo_tipo_100">   
                                        <f:selectItem itemLabel="---" itemValue="#{null}"/>
                                        <f:selectItems var="itemLPE_Alm_Prioridad" itemValue="#{itemLPE_Alm_Prioridad}" itemLabel="#{itemLPE_Alm_Prioridad.nombre}" value="#{gsspSolicitudCertificacionRMEFController.regPrioridadLPSList}"/>
                                        <p:ajax event="change" update="@this" />
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-2">
                                     <p:outputLabel value="Cargo: " />
                                </div>
                                <div class="ui-g-2">
                                    <p:inputText id="txtCargo" value="#{gsspSolicitudCertificacionRMEFController.cargoJefeSeg}"  maxlength="30" />
                                </div>
                                <div class="ui-g-2">
                                     <p:commandButton id="btnLPE_AgregarListaJefe"
                                        icon="ui-icon-plus"                                      
                                        action="#{gsspSolicitudCertificacionRMEFController.agregarListaJefe()}"
                                        value="#{BundleBDIntegrado.gsspSolicitudAutorizacion_Form_tab5_AutoServSeg_btn_LPS_titulo_Agregar}"
                                        update="@this, pnl_JefeSeguridad" />
                                    <p:tooltip for="btnLPE_AgregarListaJefe" value="Agregar Jefe" showEffect="clip" hideEffect="fold" />
                                </div>
                            </div>
                            <div class="ui-g">
                                <p:dataTable id="dtResultadosSocios" 
                                      value="#{gsspSolicitudCertificacionRMEFController.lstJefes}"
                                      var="itemRegSocio"
                                      rowKey="#{itemRegSocio.ID}"
                                      rowStyleClass="#{(itemRegSocio.activo eq 1) ? '' : 'ui-helper-hidden'}"
                                      emptyMessage="#{BundleBDIntegrado.MensajeNoResultados}"
                                      paginator="false" rows="#{BundleBDIntegrado.PaginatorFilas}"
                                      paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                      {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} 
                                      {RowsPerPageDropdown}"
                                      currentPageReportTemplate="Total {totalRecords} registro(s)"
                                      rowsPerPageTemplate="#{BundleBDIntegrado.PaginatorFilasPorPagina}">
                                
                                    <p:column headerText="Tipo Documento" style="text-align: center;" class="ui-lg-1">
                                        <h:outputText value="#{itemRegSocio.personaId.tipoDoc.nombre}" />
                                    </p:column>
                                    
                                    <p:column headerText="Nro. Documento" style="text-align: center;" class="ui-lg-1">
                                        <h:outputText value="#{itemRegSocio.personaId.numDoc}" />
                                    </p:column>
                                    
                                    <p:column headerText="Nombres" style="text-align: center;" class="ui-lg-1">
                                        <h:outputText value="#{itemRegSocio.personaId.apellidosyNombres}" />
                                    </p:column>
                                    
                                    <p:column headerText="Cargo" style="text-align: center;" class="ui-lg-1">
                                        <h:outputText value="#{itemRegSocio.cargo}" />
                                    </p:column>
                                    
                                    <p:column headerText="Prioridad" style="text-align: center;" class="ui-lg-1">
                                        <h:outputText value="#{(itemRegSocio.principal == 1 ) ? 'PRINCIPAL' : 'SECUNDARIO'}" />
                                    </p:column>
                                    
                                    <p:column headerText="Acciones" style="text-align: center;" class="ui-lg-1">
                                        <p:commandButton 
                                             value="Eliminar" 
                                             update="@this, dtResultadosSocios" 
                                             icon="ui-icon-trash"
                                             actionListener="#{gsspSolicitudCertificacionRMEFController.deleteJefe(itemRegSocio)}"
                                             >
                                         </p:commandButton>
                                    </p:column>
                                    
                                </p:dataTable>
                            </div>
                        </p:fieldset>
                    </div>
                    
                </p:panel>
                <BR/>
                <p:panel id="pnl_MediosContacto" header="Medios Contacto" style="background-color: #f0f2f4;">
                    <div class="card">
                        <p:fieldset id="fsMediosContacto" legend="Medios de Contacto" style="background-color: #f0f2f4;">
                            <div class="ui-g">
                                <div class="ui-g-2">
                                     <p:outputLabel value="Prioridad: " />
                                </div>
                                <div class="ui-g-2">
                                    <p:selectOneMenu id="cboLPE_mc_Prioridad"  value="#{gsspSolicitudCertificacionRMEFController.regPrioridadMCSelected }" class="combo_tipo_100">   
                                        <f:selectItem itemLabel="---" itemValue="#{null}"/>
                                        <f:selectItems var="itemLPE_Alm_Prioridad" itemValue="#{itemLPE_Alm_Prioridad}" itemLabel="#{itemLPE_Alm_Prioridad.nombre}" value="#{gsspSolicitudCertificacionRMEFController.regPrioridadLPSList}"/>
                                        <p:ajax event="change" update="@this" />
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-2">
                                     <p:outputLabel value="Medio de Contacto " />
                                </div>
                                <div class="ui-g-2">
                                    <p:selectOneMenu id="cboLPE_Alm_MedioContacto"  value="#{gsspSolicitudCertificacionRMEFController.regTipoMedioContactoLPSSelected }" class="combo_tipo_100">   
                                        <f:selectItem itemLabel="---" itemValue="#{null}"/>
                                        <f:selectItems var="itemLPE_Alm_MedioContacto" itemValue="#{itemLPE_Alm_MedioContacto}" itemLabel="#{itemLPE_Alm_MedioContacto.nombre}" value="#{gsspSolicitudCertificacionRMEFController.regTipoMedioContactoLPSList}"/>
                                        <!--<p:ajax event="change" update="@this,pnl_MediosContacto" />-->
                                        <p:ajax event="change" update="txtLPE_Alm_DescripMedioContacto" />
                                    </p:selectOneMenu>
                                </div>
                                <div class="ui-g-2">
                                     <p:outputLabel value="Contacto: " />
                                </div>
                                <div class="ui-g-2">
                                    <ui:param name="tipo_medio_fijo_param" value="validateNumeros(event, 'fijo')" />
                                    <ui:param name="tipo_medio_seleccionado" value="#{gsspSolicitudCertificacionRMEFController.regTipoMedioContactoLPSSelected.codProg eq 'TP_MEDCO_COR'}" />
                                    <p:inputText id="txtLPE_Alm_DescripMedioContacto" value="#{gsspSolicitudCertificacionRMEFController.regtextoContactoLPS}" 
                                         maxlength="#{(tipo_medio_seleccionado == true) ? 200 :  20 }"                                           
                                         onkeypress="#{(tipo_medio_seleccionado == true) ? 'validateAlphanumericCorreo(event)' :  tipo_medio_fijo_param }" 
                                         onblur="#{(tipo_medio_seleccionado == true) ? 'validarCorreo(this)' :  '' }"> 
                                        <p:keyFilter for="txtLPE_Alm_DescripMedioContacto" 
                                                     mask="#{(tipo_medio_seleccionado == true) ? 'email' :  'int' }"/>
                                    </p:inputText>
                                    
                                </div>
                            </div>
                            <div class="ui-g">
                                <div class="ui-g-2">
                                <p:commandButton id="btnLPE_AgregarTipoContacto"
                                        icon="ui-icon-plus"                                      
                                        action="#{gsspSolicitudCertificacionRMEFController.agregarTipoContacto()}"
                                        value="#{BundleBDIntegrado.gsspSolicitudAutorizacion_Form_tab5_AutoServSeg_btn_LPS_titulo_Agregar}"
                                        update="@this, pnl_MediosContacto" />
                                    <p:tooltip for="btnLPE_AgregarTipoContacto" value="Agregar Contacto" showEffect="clip" hideEffect="fold" />
                                    </div>
                            </div>
                            
                            <div class="ui-g">
                                <p:dataTable id="dtResultadosMedioContactos"
                                     value="#{gsspSolicitudCertificacionRMEFController.lstContactos}"
                                     var="itemRegContacto"
                                     rowKey="#{itemRegContacto.ID}"
                                     rowStyleClass="#{(itemRegContacto.activo eq 1) ? '' : 'ui-helper-hidden'}"
                                     selection="#{gsspSolicitudCertificacionRMEFController.selectedContacto}"
                                     emptyMessage="#{BundleBDIntegrado.MensajeNoResultados}"
                                     paginator="false" rows="#{BundleBDIntegrado.PaginatorFilas}"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} 
                                     {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} 
                                     {RowsPerPageDropdown}"
                                     currentPageReportTemplate="Total {totalRecords} registro(s)"
                                     rowsPerPageTemplate="#{BundleBDIntegrado.PaginatorFilasPorPagina}">

                                    <p:column headerText="#{BundleBDIntegrado.gsspSolicitudAutorizacion_Form_tab5_AutoServSeg_tbl_LPS_MedioContacto_ID}" style="text-align: center;" class="ui-lg-1" rendered="false" >
                                        <h:outputText value="#{itemRegContacto.id}" />
                                    </p:column>
                                    <p:column headerText="#{BundleBDIntegrado.gsspSolicitudAutorizacion_Form_tab5_AutoServSeg_tbl_LPS_MedioContacto_Prioridad}" style="text-align: center;" class="ui-lg-2" >
                                        <h:outputText value="#{(itemRegContacto.valor eq '290'?'PRINCIPAL':'SECUNDARIO')}" />
                                    </p:column>
                                    <p:column headerText="#{BundleBDIntegrado.gsspSolicitudAutorizacion_Form_tab5_AutoServSeg_tbl_LPS_MedioContacto_Contacto}" style="text-align: center;" class="ui-lg-2" >
                                        <h:outputText value="#{itemRegContacto.tipoMedioId.nombre}" />
                                    </p:column>
                                    <p:column headerText="#{BundleBDIntegrado.gsspSolicitudAutorizacion_Form_tab5_AutoServSeg_tbl_LPS_MedioContacto_Descripcion}" style="text-align: center;" class="ui-lg-3" >
                                        <h:outputText value="#{itemRegContacto.descripcion}" />
                                    </p:column>
                                    <p:column headerText="#{BundleBDIntegrado.gsspSolicitudAutorizacion_Form_tab5_AutoServSeg_tbl_LPS_MedioContacto_Borrar}" style="text-align: center;" class="ui-lg-1" >
                                        <p:commandButton 
                                            value="Eliminar" 
                                            update="@this, dtResultadosMedioContactos" 
                                            icon="ui-icon-trash"
                                            actionListener="#{gsspSolicitudCertificacionRMEFController.deleteContacto(itemRegContacto)}" >
                                        </p:commandButton>
                                    </p:column>
                            </p:dataTable>
                            </div>
                            
                        </p:fieldset>
                    </div>
                </p:panel>
                <BR/>
                <p:panel id="pnl_RES_SBS" header="Documentación Adjunta" style="background-color: #f0f2f4;">
                    <div class="card">
                        <p:fieldset id="fsResSBS" legend="Resolución SBS" style="background-color: #f0f2f4;">
                            <div class="ui-g">
                                <div class="ui-g-2">
                                     <p:outputLabel value="Nro. Resolución SBS " />
                                </div>
                                <div class="ui-g-2">
                                    <p:inputText id="txtNroResSBS" value="#{gsspSolicitudCertificacionRMEFController.nroResSBS}"  maxlength="20" />
                                </div>
                                <div class="ui-g-2">
                                     <p:outputLabel value="Fecha Resolución SBS " />
                                </div>
                                <div class="ui-g-2">
                                    <p:calendar id="txt_Fecha_SBS"
                                        locale="es"
                                        navigator="true"
                                        showOn="button"
                                        value="#{gsspSolicitudCertificacionRMEFController.fechaResSBS }"
                                        pattern="#{BundleBDIntegrado.FormatoFecha}" 
                                        >
                                            <f:convertDateTime pattern="#{BundleBDIntegrado.FormatoFecha}" />
                                    </p:calendar>
                                </div>
                                
                            </div>
                            <div class="ui-g">
                                <div class="ui-g-2">
                                     <p:fileUpload id="txf_Archivo_ResSBS" label="Adjuntar Resolución SBS (PDF)"
                                      invalidFileMessage="#{BundleBDIntegrado.msjeValidacionFormato_PDF}"
                                      fileUploadListener="#{gsspSolicitudCertificacionRMEFController.handleFileUploadPDF_RES_SBS}"
                                      invalidSizeMessage="#{gsspSolicitudCertificacionRMEFController.obtenerMsjeInvalidSizeFile()}"
                                      sizeLimit="#{sbParametroController.obtenerParametroXNombre('selLicenciaMunicipalPrestaServ_sizeArchivo').valor}"
                                      onstart="PF('loadingDialog').show()"
                                      oncomplete="PF('loadingDialog').hide()"
                                      mode="advanced" dragDropSupport="false"
                                      multiple="false"
                                      auto="true" process="@this,pnl_RES_SBS" update="@this,pnl_RES_SBS"
                                      allowTypes="/(\.|\/)(pdf|PDF)$/" immediate="true" 
                                      >
                                    <h:outputText value="#{gsspSolicitudCertificacionRMEFController.nomArchivoResSBS }" />
                                </p:fileUpload>
                                <p:tooltip for="txf_Archivo_ResSBS" value="Adjuntar PDF" showEffect="clip" hideEffect="fold" />
                                </div>
                                <div class="ui-g-2">
                                    <p:commandButton icon="ui-icon-document" rendered="#{gsspSolicitudCertificacionRMEFController.habilitarVerResSBS}"
                                                     immediate="true" value="VER RESOLUCIÓN SBS (PDF)" onclick="this.form.target = '_blank'" onblur="this.form.target = '_self'" ajax="false">
                                   <p:fileDownload value="#{gsspSolicitudCertificacionRMEFController.obtenerArchivoResSBS()}" contentDisposition="inline" />
                                </p:commandButton>
                                </div>
                            </div>
                           
                        </p:fieldset>
                        <BR/> 
                        <p:fieldset id="fsRiesgo" legend="Análisis de Riesgos" style="background-color: #f0f2f4;">
                            <div class="ui-g">
                                <div class="ui-g-2">
                                     <p:outputLabel value="Nivel de Riesgo " />
                                </div>
                                <div class="ui-g-2">
                                    <p:selectOneRadio id="riesgoOpcion" layout="pageDirection" value="#{gsspSolicitudCertificacionRMEFController.checkTipoRiesgo}" >
                                        <f:selectItem itemLabel="ALTO" itemValue="1" />
                                        <f:selectItem itemLabel="MEDIO" itemValue="2" />
                                        <f:selectItem itemLabel="BAJO" itemValue="3" />
                                        <p:ajax event="change"  />
                                    </p:selectOneRadio>
                                </div>
                                
                            </div>
                            <div class="ui-g">
                                <div class="ui-g-2">
                                     <p:fileUpload id="txf_Archivo_MR" label="Adjuntar Matriz de Riesgo (PDF)"
                                      invalidFileMessage="#{BundleBDIntegrado.msjeValidacionFormato_PDF}"
                                      fileUploadListener="#{gsspSolicitudCertificacionRMEFController.handleFileUploadPDF_MR}"
                                      invalidSizeMessage="#{gsspSolicitudCertificacionRMEFController.obtenerMsjeInvalidSizeFile()}"
                                      sizeLimit="#{sbParametroController.obtenerParametroXNombre('selLicenciaMunicipalPrestaServ_sizeArchivo').valor}"
                                      onstart="PF('loadingDialog').show()"
                                      oncomplete="PF('loadingDialog').hide()"
                                      mode="advanced" dragDropSupport="false"
                                      multiple="false"
                                      auto="true" process="@this,pnl_RES_SBS" update="@this,pnl_RES_SBS"
                                      allowTypes="/(\.|\/)(pdf|PDF)$/" immediate="true" 
                                      >
                                    <h:outputText value="#{gsspSolicitudCertificacionRMEFController.nomArchivoMR }" />
                                </p:fileUpload>
                                <p:tooltip for="txf_Archivo_MR" value="Adjuntar PDF" showEffect="clip" hideEffect="fold" />
                                </div>
                                <div class="ui-g-2">
                                    <p:commandButton icon="ui-icon-document" rendered="#{gsspSolicitudCertificacionRMEFController.habilitarVerResMR}"
                                                     immediate="true" value="VER MATRIZ RIESGO (PDF)" onclick="this.form.target = '_blank'" onblur="this.form.target = '_self'" ajax="false">
                                   <p:fileDownload value="#{gsspSolicitudCertificacionRMEFController.obtenerArchivoMR()}" contentDisposition="inline" />
                                </p:commandButton>
                                </div>
                            </div>
                        </p:fieldset>
                    </div>
                </p:panel>
                <BR/>
                <div class="ui-g">
                    <div class="ui-g-12 ui-md-1 ui-lg-1">
                        <p:commandButton id="botonGuardarAutorizacionServicio"
                                 icon="ui-icon-disk"                                      
                                 actionListener="#{gsspSolicitudCertificacionRMEFController.guardarDatosSolicitud()}"
                                 process="@form"
                                 update="FormRegSolicCertRMEF"
                                 value="#{BundleBDIntegrado.Guardar}"/>
                    </div>
                    <div class="ui-g-12 ui-md-1 ui-lg-1">
                        <p:commandButton icon="ui-icon-closethick"
                                 action="#{gsspSolicitudCertificacionRMEFController.prepareList() }"
                                 value="Cancelar"
                                 style="margin-left: 20px;"
                                 immediate="true" 
                                 update="@all"  
                                 />
                    </div>
                    <div class="ui-g-12 ui-md-10 ui-lg-10" style="display:none;"></div>
                </div> 
                </h:form>
            </h:panelGroup>   
            
        </div> 
         <ui:include src="dlgMapa.xhtml" />
         <ui:include src="dlgRepresentanteLegal.xhtml" />
    </ui:define>
    
    
</ui:composition>
