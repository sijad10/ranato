<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions">
    
            <h:form id="declararForm" rendered="#{sspCarteraClienteController.estado == 'DECLARAR' or sspCarteraClienteController.estado == 'DECLARAR_ADENDA'}" >
                <p:panel id="pnlObservaciones" header="#{BundleBDIntegradofe.sspCarteraCli_editar_observaciones}" rendered="#{sspCarteraClienteController.lstObservaciones.size() > 0 }" >
                    <h:panelGrid columns="1">
                        <p:dataTable id="datatableObsv" 
                                     value="#{sspCarteraClienteController.lstObservacionesOrdenadasDesc }"
                                     var="item"  
                                     emptyMessage="#{BundleBDIntegrado.MensajeNoResultados}">
                            <p:column headerText="Fecha" style="text-align: center;">
                                <h:outputText value="#{item.fecha}">
                                    <f:convertDateTime pattern="#{bundle.FormatoFecha}" />
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Observación" style="text-align: center;" >
                                <h:outputText value="#{item.observacion}"/>
                            </p:column>
                        </p:dataTable>
                    </h:panelGrid>
                    <br/>
                </p:panel>
                
                <p:panel id="pnlDatosAdministrado" header="#{BundleBDIntegrado.sspCarteraCli_crear_datosAdministrado}" >
                    <br/>
                    <h:panelGrid columns="3" id="pnlDatosAdministradoPG"  >
                        <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_sede}" style="font-weight: bold;display: block;width: 100px;" rendered="false"  />
                        <p:outputLabel value="#{sspCarteraClienteController.registro.sedeId.direccion} #{sspCarteraClienteController.registro.sedeId.numero}" rendered="false" />
                        <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_modalidad}" style="margin-left: 10px;font-weight: bold;" />
                        <p:dataTable id="buscarDatatableRegistro" value="#{sspCarteraClienteController.registro.tipoSeguridadList}"
                                     var="itemReg"
                                     style="width: 320px;"
                                     emptyMessage="#{BundleBDIntegrado.MensajeNoResultados}" >
                            <p:column headerText="MODALIDAD" style="text-align: center;" >
                                <h:outputText value="#{itemReg.nombre}" />
                            </p:column>
                         </p:dataTable>
                        <p:outputLabel value=" " />
                        
                        <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_representante}" style="font-weight: bold;display: block;width: 100px;" rendered="false"  />
                        <p:outputLabel value="#{sspCarteraClienteController.registro.reprAdminId.nombreCompleto} / #{sspCarteraClienteController.registro.reprAdminId.numDoc}" rendered="false" />
                        <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_consorcio}" style="font-weight: bold;display: block;margin-left: 10px;"  />
                        <p:dataTable id="tblConsorcio" value="#{sspCarteraClienteController.listadoConsorcio}"
                                     var="itemReg"
                                     style="width: 320px;"
                                     emptyMessage="#{BundleBDIntegrado.MensajeNoResultados}" >
                            <p:column headerText="EMPRESA" style="text-align: center;" >
                                <h:outputText value="#{itemReg.rznSocial}" />
                            </p:column>
                            <p:column headerText="ACCIÓN" style="text-align: center;width: 40px;" >
                                <p:commandButton icon="ui-icon-trash"
                                                 styleClass="botonBorrar"
                                                 update="@form"
                                                 title="Borrar"
                                                 actionListener="#{sspCarteraClienteController.eliminarConsorcio(itemReg) }" >
                                    <p:confirm header="Confirmación" message="¿Está seguro de borrar el registro seleccionado?" icon="ui-icon-alert" /> 
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>
                        <p:commandButton icon="ui-icon-search"                                            
                                         process="pnlDatosAdministradoPG"
                                         update="pnlDatosAdministradoPG"
                                         value="Buscar"
                                         id="btnConsorcio"
                                         actionListener="#{sspCarteraClienteController.openBuscarConsorcio() }" >
                        </p:commandButton>
                        
                        <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_evento}(*)" style="font-weight: bold;" rendered="#{sspCarteraClienteController.renderEvento}" />
                        <h:panelGrid columns="6" id="pnlEvento" rendered="#{sspCarteraClienteController.renderEvento}" >
                            <p:selectBooleanCheckbox  id="evento" value="#{sspCarteraClienteController.blnEvento}"  >
                                <p:ajax process="@this,pnlDatosAdministradoPG" update="@this,pnlDatosAdministradoPG" listener="#{sspCarteraClienteController.openDlgConfirmarEvento()}" />
                            </p:selectBooleanCheckbox>
                            <p:inputText value="#{sspCarteraClienteController.registro.tipoEvento}" id="tipoEvento" 
                                         style="width: 350px;"
                                         placeholder="EJEMPLO: ESPECTÁCULOS/CONVENCIONES/CERTÁMENES"
                                         rendered="#{sspCarteraClienteController.blnEvento }"
                                         maxlength="200"  />
                        </h:panelGrid>
                        <p:outputLabel value=" " />
                    </h:panelGrid>
                </p:panel>
                
                <br/>
                <h:panelGrid rendered="#{sspCarteraClienteController.renderPnlPersona}" >
                    <p:panel id="pnlDatosCliente" header="#{BundleBDIntegrado.sspCarteraCli_crear_datosCliente}"  >
                        <h:panelGrid columns="6" id="pnlCabecera" >
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_tiposCliente}" style="width: 120px;display: block;font-weight: bold;" />
                            <p:outputLabel value="#{sspCarteraClienteController.obtenerTipoDocView(sspCarteraClienteController.tipoDoc)}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_ruc}" rendered="#{sspCarteraClienteController.esRuc}" style="margin-left: 20px;font-weight: bold;"  />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_documento}" rendered="#{sspCarteraClienteController.esDni}" style="margin-left: 20px;font-weight: bold;" />
                            <h:panelGrid columns="2" rendered="#{sspCarteraClienteController.esRuc or sspCarteraClienteController.esDni}" >
                                <p:outputLabel value="#{sspCarteraClienteController.numDoc}" />
                            </h:panelGrid>
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_rznSocial}" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" style="margin-left: 20px;font-weight: bold;" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_nombres}" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" style="margin-left: 20px;font-weight: bold;" />
                            <p:outputLabel value="#{sspCarteraClienteController.registro.clienteId.rznSocial}" id="rznSocial" rendered="#{(sspCarteraClienteController.esRuc ) and sspCarteraClienteController.blnBusco }" style="width: 300px;"  />  
                            <p:outputLabel value="#{sspCarteraClienteController.registro.clienteId.nombres}" id="nombresDni" rendered="#{(sspCarteraClienteController.esDni) and sspCarteraClienteController.blnBusco }" style="width: 300px;" />  



                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_nombreComercial}" style="width: 120px;display: block;font-weight: bold;" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{sspCarteraClienteController.registro.clienteId.nomCom}" id="nomCom" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_direccion}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{sspCarteraClienteController.direccionRuc}" id="direccionRuc" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_ubigeo}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel id="ubigeoRuc" value="#{sspCarteraClienteController.ubigeoRuc.nombreCompleto }" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />
 

                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_correo}" style="width: 120px;display: block;font-weight: bold;" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{sspCarteraClienteController.correo }" id="correoRuc" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_telefono}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{sspCarteraClienteController.telefono}" id="telefonoRuc" rendered="#{sspCarteraClienteController.esRuc and sspCarteraClienteController.blnBusco}" />



                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_apePaterno}" style="width: 120px;display: block;font-weight: bold;" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}"  />
                            <p:outputLabel value="#{sspCarteraClienteController.registro.clienteId.apePat}" id="apePat" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_apeMaterno}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{sspCarteraClienteController.registro.clienteId.apeMat}" id="apeMat" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_sexo}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel id="generoId" value="#{sspCarteraClienteController.registro.clienteId.generoId.nombre}" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />


                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_fechaNacimiento}" style="width: 120px;display: block;font-weight: bold;" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel id="fechaNac" value="#{sspCarteraClienteController.registro.clienteId.fechaNac}" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" >
                                <f:convertDateTime pattern="#{BundleBDIntegrado.FormatoFecha}" />
                            </p:outputLabel>
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_direccion}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{sspCarteraClienteController.direccionDni}" id="direccionDni" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_ubigeo}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel id="ubigeoDni" value="#{sspCarteraClienteController.ubigeoDni.nombreCompleto}" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />


                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_correo}" style="width: 120px;display: block;font-weight: bold;" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{sspCarteraClienteController.correo }" id="correoDni" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_telefono}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                            <p:outputLabel value="#{sspCarteraClienteController.telefono}" id="telefonoDni" rendered="#{sspCarteraClienteController.esDni and sspCarteraClienteController.blnBusco}" />
                        </h:panelGrid>
                    </p:panel>
                </h:panelGrid>                    
                
                <br/>
                <h:panelGrid rendered="#{sspCarteraClienteController.renderPnlRepLegal}" >
                    <p:panel id="pnlDatosRepLegal" header="#{BundleBDIntegrado.sspCarteraCli_crear_RepLegal}"  >
                        <h:panelGrid columns="6" >
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_tiposDocumento}" style="width: 120px;display: block;font-weight: bold;" />
                            <p:outputLabel value="#{sspCarteraClienteController.obtenerTipoDocView(sspCarteraClienteController.tipoDocRepLegal)}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_documento}" style="margin-left: 20px;font-weight: bold;" />
                            <h:panelGrid columns="2" >
                                <p:outputLabel value="#{sspCarteraClienteController.numDocRepLegal}" id="docRepLegal" />
                            </h:panelGrid>
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_nombres}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{sspCarteraClienteController.registro.reprCliId.nombres}" id="nombresRepLegal" style="width: 300px;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />

                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_apePaterno}" style="width: 120px;display: block;font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{sspCarteraClienteController.registro.reprCliId.apePat}" id="apePatRepLegal" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_apeMaterno}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{sspCarteraClienteController.registro.reprCliId.apeMat}" id="apeMatRepLegal" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_sexo}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel id="generoIdRepLegal" value="#{sspCarteraClienteController.registro.reprCliId.generoId.nombre}" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />


                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_direccion}" style="font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{sspCarteraClienteController.direccionRepLegal}" id="direccionRepLegal" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_ubigeo}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel id="ubigeoRepLegal" value="#{sspCarteraClienteController.ubigeoRepLegal.nombreCompleto }" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_telefono}" style="margin-left: 20px;font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{sspCarteraClienteController.telefonoRepLegal}" id="telefonoRepLegal" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />

                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_fechaNacimiento}" style="font-weight: bold;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal }" />
                            <p:outputLabel id="fechaNacRepLegal" value="#{sspCarteraClienteController.registro.reprCliId.fechaNac}" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" >
                                <f:convertDateTime pattern="#{BundleBDIntegrado.FormatoFecha}" />
                            </p:outputLabel>
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_correo}" style="width: 120px;display: block;font-weight: bold;margin-left: 20px;" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                            <p:outputLabel value="#{sspCarteraClienteController.correoRepLegal }" id="correoRepLegal" rendered="#{sspCarteraClienteController.blnBuscoRepLegal}" />
                        </h:panelGrid>
                    </p:panel>
                </h:panelGrid>                    
                
                <br/>
                <h:panelGrid >
                    <p:panel id="pnlDatosServicio" header="#{BundleBDIntegrado.sspCarteraCli_crear_datosServicio}"  >
                        <h:panelGrid columns="1" id="pnlTableDatosServicio" >
                            <p:dataTable id="dtLugarServicio" value="#{sspCarteraClienteController.listadoLugarServicio}"
                                         var="itemReg"
                                         emptyMessage="#{BundleBDIntegrado.MensajeNoResultados}" >
                                <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtDatosServicio_direccion}" style="text-align: center;" >
                                    <h:outputText value="#{itemReg.direccion}" />
                                </p:column>
                                <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtDatosServicio_ubigeo}" style="text-align: center;" >
                                    <h:outputText value="#{itemReg.distId.provinciaId.departamentoId.nombre} #{itemReg.distId.provinciaId.nombre} #{itemReg.distId.nombre}" />
                                </p:column>
                                <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtDatosServicio_latitud}" style="text-align: center;" >
                                    <h:outputText value="#{itemReg.latitud} / #{itemReg.longitud}" />
                                </p:column>
                                <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtDatosServicio_verMapa}" style="text-align: center;" >
                                    <p:commandButton icon="ui-icon-search"
                                                    process="@this"
                                                    value="Mapa"
                                                    id="btnVerMapa"
                                                    actionListener="#{sspCarteraClienteController.openDlgVerMapa(itemReg) }" >
                                    </p:commandButton>
                                </p:column>
                                <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtDatosServicio_referencia}" style="text-align: center;" >
                                    <h:outputText value="#{itemReg.referencia}" />
                                </p:column>
                             </p:dataTable>
                        </h:panelGrid>

                        <h:panelGrid columns="4" >
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_observacion}" style="font-weight: bold;" />
                            <p:outputLabel value="#{sspCarteraClienteController.registro.observacion }" id="observacionServ" style="width: 350px;" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_adjuntarContrato}" style="margin-left: 15px;font-weight: bold;" />
                            <p:commandButton  icon="ui-icon-document"
                                            ajax="false"
                                            style="background-color: #F2F2F2;color: #000000;"
                                            value="#{sspCarteraClienteController.archivo }"
                                            process="@all"
                                            rendered="#{sspCarteraClienteController.archivo != null}"
                                            onclick="this.form.target = '_blank'"
                                            onblur="this.form.target = '_self'"
                                            immediate="true" >
                                  <p:fileDownload value="#{sspCarteraClienteController.cargarDocumento()}" contentDisposition="inline"  />
                            </p:commandButton>
                            <p:outputLabel value=" " rendered="#{sspCarteraClienteController.archivo == null}" />

                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_fechaInicioServ}" style="font-weight: bold;" />
                            <p:outputLabel id="fechaInicio" value="#{sspCarteraClienteController.fechaInicioServicio}" >
                                <f:convertDateTime pattern="#{BundleBDIntegrado.FormatoFecha}" />
                            </p:outputLabel>
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_fechaTerminoServ}" style="margin-left: 15px;font-weight: bold;" />
                            <p:calendar id="fechaFin"
                                        readonlyInput="true"
                                        locale="es"
                                        mindate="#{sspCarteraClienteController.minimafechaTermino}"
                                        maxdate="#{sspCarteraClienteController.maximafechaTerminoFinActualizada}"
                                        disabled="#{sspCarteraClienteController.registro.fechaFin == null}"
                                        showOn="button" value="#{sspCarteraClienteController.registro.fechaFin}"
                                        validatorMessage="#{BundleBDIntegrado.sspCarteraCli_crear_validatorMsje_fechaTermino}"
                                        pattern="#{BundleBDIntegrado.FormatoFecha}" >
                                    <f:convertDateTime pattern="#{BundleBDIntegrado.FormatoFecha}" />
                                    <p:ajax event="dateSelect" 
                                            process="@this,pnlDatosServicio"
                                            partialSubmit="true"
                                            listener="#{sspCarteraClienteController.cambiaFechaFinDeclaracion()}" 
                                            update="pnlDatosServicio"/>
                            </p:calendar>
                            
                            <p:outputLabel value="" />
                            <p:outputLabel value="" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_motivoCambioFecha}" 
                                           rendered="#{sspCarteraClienteController.renderObservacionFechaFin}" 
                                           style="margin-left: 15px;font-weight: bold;" />
                            <p:inputTextarea cols="70" rows="2" 
                                             id ="observacionFechaFin"
                                             maxlength="400"
                                             onblur="this.value = this.value.toUpperCase();"
                                             value="#{sspCarteraClienteController.strObservacion}"
                                             rendered="#{sspCarteraClienteController.renderObservacionFechaFin}" />
                        </h:panelGrid>
                    </p:panel>
                </h:panelGrid>                    
                
                <br/>
                <h:panelGrid id="pngTodosRecursos" rendered="#{sspCarteraClienteController.renderCheckTodosRecursos()}" style="border-style: solid;border-color: #045FB4; width: 100%;border-width: 1px;">
                    <p:panel id="pnlTodosRecursos" header="#{BundleBDIntegrado.sspCarteraCli_crear_asignarRecursos}" >
                        <p:selectBooleanCheckbox id="asignarRecursos"
                                                 disabled="true"
                                                 value="#{sspCarteraClienteController.registro.todoRecursosBoolean}"
                                                 itemLabel="Asignar todos los recursos" >
                        </p:selectBooleanCheckbox>
                    </p:panel>
                </h:panelGrid>
                
                <br/>
                <h:panelGrid id="pngRelacionPersonal" rendered="#{sspCarteraClienteController.renderPnlVigilantes}" >
                    <p:panel id="pnlRelacionPersonal" header="#{BundleBDIntegrado.sspCarteraCli_crear_relacionPersonal}"  >
                        <h:panelGrid columns="2" >
                            <h:panelGrid columns="5" >
                                <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_vigilante}(*)" style="font-weight: bold;" />
                                <p:commandButton icon="ui-icon-search"                                            
                                                    process="pnlRelacionPersonal"
                                                    update="pnlRelacionPersonal"
                                                    value="Buscar"
                                                    id="btnBuscarVigilante"
                                                    actionListener="#{sspCarteraClienteController.openBuscarVigilanteSeguridad() }" >
                                </p:commandButton>
                            </h:panelGrid>
                            <h:panelGrid columns="7" >
                                <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_nombres}" rendered="#{sspCarteraClienteController.nombresSeguridad ne null}" style="font-weight: bold;" />
                                <p:outputLabel value="#{sspCarteraClienteController.nombresSeguridad}" rendered="#{sspCarteraClienteController.nombresSeguridad ne null}"  />
                                <p:outputLabel value="#{sspCarteraClienteController.obtenerTipoDocSeguridad()}" rendered="#{sspCarteraClienteController.nombresSeguridad ne null}" style="font-weight: bold;margin-left: 20px;" />
                                <p:outputLabel value="#{sspCarteraClienteController.numDocSeguridad}" rendered="#{sspCarteraClienteController.nombresSeguridad ne null}" />
                                <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_motivoIngreso}" rendered="#{sspCarteraClienteController.motivoSeguridad ne null}" style="font-weight: bold;margin-left: 15px;" />
                                <p:inputText id="motivoSeguridad" value="#{sspCarteraClienteController.motivoSeguridad}" rendered="#{sspCarteraClienteController.motivoSeguridad ne null}" style="width: 300px;" maxlength="400" />
                                <p:commandButton icon="ui-icon-plus"
                                                value="#{BundleBDIntegrado.sspCarteraCli_crear_agregar}"
                                                rendered="#{sspCarteraClienteController.nombresSeguridad ne null}"
                                                process="@this,pnlRelacionPersonal" update="@this,pnlRelacionPersonal"
                                                actionListener="#{sspCarteraClienteController.agregarPersonalSeguridad()}" >
                               </p:commandButton>
                            </h:panelGrid>
                        </h:panelGrid>

                        <p:dataTable id="dtPersonalSeguridad" value="#{sspCarteraClienteController.lstPersonalSeguridadContratoActivos}"
                                     var="itemReg" 
                                     rowKey="#{itemReg.id}"
                                     selection="#{sspCarteraClienteController.lstPersonalSeguridadSeleccionados}"
                                     emptyMessage="#{BundleBDIntegrado.MensajeNoResultados}" >

                            <p:column selectionMode="multiple" style="width:16px;text-align:center" visible="#{itemReg.declarado != '0'}" />
                            <p:column style="width:16px;text-align:center" visible="#{itemReg.declarado == '0'}" selectRow="#{itemReg.declarado != '0'}" />
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionPersonal_nombres}" style="text-align: center;" selectRow="#{itemReg.declarado != '0'}" >
                                <h:outputText value="#{itemReg.nombres}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionPersonal_nroDNI}" style="text-align: center;" selectRow="#{itemReg.declarado != '0'}" >
                                <h:outputText value="#{itemReg.doc}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionPersonal_nroCarne}" style="text-align: center;" selectRow="#{itemReg.declarado != '0'}" >
                                <h:outputText value="#{itemReg.carne}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionPersonal_nroLicencia}" style="text-align: center;" selectRow="#{itemReg.declarado != '0'}" >
                                <h:outputText value="#{itemReg.licencia}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionPersonal_motivoIngreso}" style="text-align: center;" selectRow="#{itemReg.declarado != '0'}" >
                                <h:outputText value="#{itemReg.motivoSeguridad}" />
                            </p:column>
                        </p:dataTable>
                        <p:commandButton icon="ui-icon-closethick"
                                            value="Eliminar Seleccionados"
                                            process="@this,pnlRelacionPersonal"
                                            update="@this,pnlRelacionPersonal"
                                            actionListener="#{sspCarteraClienteController.openDlgConfirmarDeclaracion(1)}">
                        </p:commandButton>
                    </p:panel>
                </h:panelGrid>
                
                <br/>
                <h:panelGrid id="pngRelacionArmas" rendered="#{sspCarteraClienteController.renderPnlArmas}" >
                    <p:panel id="pnlRelacionArmas" header="#{BundleBDIntegrado.sspCarteraCli_crear_relacionArmas}"  >
                        <h:panelGrid columns="13" >
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_tipoBusqueda}(*)" style="font-weight: bold;" />
                            <p:selectOneMenu id="tipoDocSeguridad" value="#{sspCarteraClienteController.tipoDocArmas}" >
                                <f:selectItem itemLabel="--------" itemValue="#{null}"/>
                                <f:selectItem itemLabel="NRO. RUA" itemValue="1"/>
                                <f:selectItem itemLabel="SERIE" itemValue="2"/>
                            </p:selectOneMenu>                    
                            <p:inputText value="#{sspCarteraClienteController.documentoArma }" id="numDocSeguridad" maxlength="25" onblur="this.value = this.value.toUpperCase();" />
                            <p:commandButton value="Buscar" 
                                             actionListener="#{sspCarteraClienteController.buscarDatosArma()}"
                                             process="@this,pnlRelacionArmas"
                                             update="pnlRelacionArmas"
                                             icon="ui-icon-search" />

                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_rua}" style="font-weight: bold;margin-left: 15px;" rendered="#{sspCarteraClienteController.tarjetaPropiedad ne null}" />
                            <p:outputLabel value="#{sspCarteraClienteController.tarjetaPropiedad.armaId.nroRua}" rendered="#{sspCarteraClienteController.tarjetaPropiedad ne null}" />

                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_serie}" style="font-weight: bold;margin-left: 15px;" rendered="#{sspCarteraClienteController.tarjetaPropiedad ne null}" />
                            <p:outputLabel value="#{sspCarteraClienteController.tarjetaPropiedad.armaId.serie}" rendered="#{sspCarteraClienteController.tarjetaPropiedad ne null}" />

                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_tipoArma}" style="font-weight: bold;" rendered="#{sspCarteraClienteController.tarjetaPropiedad ne null}" />
                            <p:outputLabel value="#{sspCarteraClienteController.tarjetaPropiedad.armaId.tipoArmaId.nombre}" rendered="#{sspCarteraClienteController.tarjetaPropiedad ne null}" />
                            
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_motivoIngreso}" rendered="#{sspCarteraClienteController.tarjetaPropiedad ne null}" style="font-weight: bold;margin-left: 15px;" />
                            <p:inputText id="motivoArma" value="#{sspCarteraClienteController.motivoArma}" rendered="#{sspCarteraClienteController.tarjetaPropiedad ne null}" style="width: 300px;" maxlength="400" />
                            
                            <p:commandButton icon="ui-icon-plus"
                                                value="#{BundleBDIntegrado.sspCarteraCli_crear_agregar}"
                                                rendered="#{sspCarteraClienteController.tarjetaPropiedad ne null}"
                                                process="@this,pnlRelacionArmas" update="@this,pnlRelacionArmas"
                                                actionListener="#{sspCarteraClienteController.agregarArmas()}" >
                            </p:commandButton>
                        </h:panelGrid>
                        <p:dataTable id="dtArmas" value="#{sspCarteraClienteController.listadoArmasContratoActivo}"
                                     var="itemReg"
                                     rowKey="#{itemReg.id}"
                                     selection="#{sspCarteraClienteController.lstArmasSeleccionadas}"
                                     emptyMessage="#{BundleBDIntegrado.MensajeNoResultados}" >
                            <p:column selectionMode="multiple" style="width:16px;text-align:center" visible="#{itemReg.actualizacion != '0'}" />
                            <p:column style="width:16px;text-align:center" visible="#{itemReg.actualizacion == '0'}" selectRow="#{itemReg.actualizacion != '0'}" />
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionArma_rua}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.armaId.armaId.nroRua}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionArma_serie}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.armaId.armaId.serie}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionArma_modelo}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.armaId.armaId.modeloId.modelo}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionArma_tipoArma}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.armaId.armaId.tipoArmaId.nombre}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionArma_calibre}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.armaId.armaId.calibreId.nombre}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionArma_marca}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.armaId.armaId.marcaId.nombre}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionArma_motivo}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.observacion }" />
                            </p:column>
                        </p:dataTable>
                        <p:commandButton icon="ui-icon-closethick"
                                            value="Eliminar Seleccionados"
                                            process="@this,dtArmas"
                                            update="@this,dtArmas"
                                            actionListener="#{sspCarteraClienteController.openDlgConfirmarDeclaracion(2)}">
                        </p:commandButton>
                    </p:panel>
                </h:panelGrid>
                
                <br/>
                <h:panelGrid id="pngRelacionvehiculos" rendered="#{sspCarteraClienteController.renderPnlVehiculos}" >
                    <p:panel id="pnlRelacionvehiculos" header="#{BundleBDIntegrado.sspCarteraCli_crear_relacionVehiculos}"  >
                        <h:panelGrid columns="7" >
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_tarjetaPropiedad}" style="font-weight: bold;" />
                            <p:inputText value="#{sspCarteraClienteController.vehiculo.tarjetaPropiedad }" id="tarjetaPropiedadVehiculo" maxlength="20" onblur="this.value = this.value.toUpperCase();" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_marca}" style="font-weight: bold;" />
                            <p:inputText value="#{sspCarteraClienteController.vehiculo.marca }" id="marcaVehiculo" maxlength="50" onblur="this.value = this.value.toUpperCase();" />
                            <p:outputLabel value=" " />
                            <p:outputLabel value=" " />
                            <p:outputLabel value=" " />

                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_placa}(*)" style="font-weight: bold;" />
                            <p:inputText value="#{sspCarteraClienteController.nroPlaca }" id="placaVehiculo" maxlength="50" requiredMessage="#{BundleBDIntegrado.sspCarteraCli_crear_requiredMessage_placa}" validatorMessage="#{BundleBDIntegrado.sspCarteraCli_crear_requiredMessage_placa}" onblur="this.value = this.value.toUpperCase();" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_certificadoSUCAMEC}" style="font-weight: bold;" />
                            <p:inputText value="#{sspCarteraClienteController.vehiculo.certificado }" id="certificadoVehiculo" maxlength="50" onblur="this.value = this.value.toUpperCase();" />
                            <p:outputLabel value="#{BundleBDIntegrado.sspCarteraCli_crear_motivoIngreso}" style="font-weight: bold;margin-left: 15px;" />
                            <p:inputText id="motivoVehiculo" value="#{sspCarteraClienteController.motivoVehiculo}" style="width: 300px;" maxlength="400" />
                            <p:commandButton icon="ui-icon-plus"
                                                value="#{BundleBDIntegrado.sspCarteraCli_crear_agregar}"
                                                process="@this,pnlRelacionvehiculos" update="@this,pnlRelacionvehiculos"
                                                actionListener="#{sspCarteraClienteController.agregarVehiculo()}" >
                            </p:commandButton>
                        </h:panelGrid>
                        <p:dataTable id="dtVehiculos" value="#{sspCarteraClienteController.listadoVehiculosContratoActivo}"
                                     var="itemReg"
                                     rowKey="#{itemReg.id}"
                                     selection="#{sspCarteraClienteController.lstVehiculosSeleccionados}"
                                     emptyMessage="#{BundleBDIntegrado.MensajeNoResultados}" >
                            <p:column selectionMode="multiple" style="width:16px;text-align:center" visible="#{itemReg.actualizacion != '0'}" />
                            <p:column style="width:16px;text-align:center" visible="#{itemReg.actualizacion == '0'}" selectRow="#{itemReg.actualizacion != '0'}" />
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionVeh_tarjetPropiedad}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.vehiculoId.tarjetaPropiedad}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionVeh_marca}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.vehiculoId.marca}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionVeh_placa}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.vehiculoId.placa}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionVeh_certificadoSUCAMEC}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.vehiculoId.certificado}" />
                            </p:column>
                            <p:column headerText="#{BundleBDIntegrado.sspCarteraCli_crear_dtRelacionVeh_motivo}" style="text-align: center;" selectRow="#{itemReg.actualizacion != '0'}" >
                                <h:outputText value="#{itemReg.observacion }" />
                            </p:column>
                        </p:dataTable>
                        <p:commandButton icon="ui-icon-closethick"
                                            value="Eliminar Seleccionados"
                                            process="@this,dtVehiculos"
                                            update="@this,dtVehiculos"
                                            actionListener="#{sspCarteraClienteController.openDlgConfirmarDeclaracion(3)}">
                        </p:commandButton>
                    </p:panel>
                </h:panelGrid>
                    
                <br/>
                <br />
                <h:panelGrid columns="2" >
                    <p:commandButton id="botonGuardar" 
                                     icon="ui-icon-disk" 
                                     update="@all"
                                     action="#{sspCarteraClienteController.declarar()}" 
                                     value="#{BundleBDIntegrado.Guardar}"/>
                    <p:commandButton icon="ui-icon-closethick"
                                     action="#{sspCarteraClienteController.prepareList() }"
                                     value="Cancelar"
                                     style="margin-left: 20px;"
                                     immediate="true" update="@all"  />
                    <br/><br/>
                </h:panelGrid>
            </h:form>
            
            <script src="#{sspCarteraClienteController.obtenerKeyGoogle()}" type="text/javascript"></script>
            <script type="text/javascript" src="#{sspCarteraClienteController.obtenerApiGoogle()}"></script>
</ui:composition>
